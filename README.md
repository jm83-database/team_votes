# 팀 프로젝트 투표 시스템

온라인 교육 환경에서 프로젝트 발표 후 팀 간 투표를 진행할 수 있는 고급 웹 애플리케이션입니다.

## 주요 기능

### 학생 기능
- 개인 계정으로 로그인 (이름 + 비밀번호)
- 자신의 팀을 제외한 다른 팀들의 프로젝트 확인
- **다중 투표 방식 지원**: 1개 팀 선택 또는 3개 팀 선택 방식
- **선택 순서 표시**: 3개 팀 선택 시 선택 순서를 번호로 표시
- **실시간 선택 가이드**: 선택된 팀 수와 남은 선택 수 안내
- 투표 완료 후 재투표 불가
- **투표 결과 5초간 표시**: 투표 직후 선택한 팀 정보를 5초간 확인 가능
- **자동 화면 전환**: 5초 후 "투표를 이미 하셨습니다" 메시지로 자동 변경
- 실시간 카운트다운으로 화면 전환 시점 안내

### 관리자 기능
- **통합 투표 시작/설정**: 한 번의 클릭으로 모든 투표 설정 완료
- **투표 방식 선택**: 1개 팀 선택 또는 3개 팀 선택 방식 설정
- **유연한 시간 관리**: 
  - 즉시 시작 (지정한 시간 동안)
  - 시간 설정 (특정 시간대에 진행)
- **실시간 투표 상태 확인**: 투표 활성화 상태, 진행 시간, 투표 방식 표시
- **스마트 순위 시스템**: 공동 순위 자동 처리 및 등수별 색상 구분
- 실시간 투표 결과 집계 및 순위 확인
- 학생별 투표 현황 모니터링
- **보안 강화된 투표 초기화**: 커스텀 모달창을 통한 암호화된 비밀번호 입력
- **경고 메시지**: 투표 초기화 시 데이터 삭제 경고 및 확인 과정
- 투표 결과 CSV 다운로드 (투표 방식 정보 포함)
- 교육과정별 학생/팀 데이터 관리
- 실시간 새로고침 기능

## 새로운 기능

### 투표 방식 설정
- **1개 팀 선택**: 전통적인 단일 투표 방식
- **3개 팀 선택**: 다중 선택으로 더 다양한 평가 기회 제공

### 투표 시간 관리
- **즉시 시작**: 관리자가 설정한 시간(분) 동안 투표 진행
- **시간 설정**: 특정 시간대(예: 09:00~17:00)에 투표 진행

### 향상된 사용자 경험
- 투표 방식에 따른 동적 UI 변경
- 선택 진행률 실시간 표시
- 직관적인 팀 선택 인터페이스

### 스마트 순위 시스템
- **공동 순위 처리**: 동일한 득표수를 가진 팀들은 같은 순위로 표시
- **올바른 순위 건너뛰기**: 공동 1등이 2팀 있으면 다음 순위는 3등
- **등수별 색상 구분**: 
  - 🥇 **1등**: 금색 (Gold)
  - 🥈 **2등**: 은색 (Silver)  
  - 🥉 **3등**: 동색 (Bronze)
  - **4등 이하**: 파란색 (기본색)

## 시스템 요구사항

- Python 3.7+
- Flask 2.3+
- 모던 웹 브라우저 (Chrome, Firefox, Safari, Edge)

## 설치 및 실행

### 1. 프로젝트 클론 및 이동
```bash
cd /mnt/d/dev/github/team_votes
```

### 2. 가상환경 생성 및 활성화
```bash
# 가상환경 생성
python -m venv venv

# 가상환경 활성화 (Linux/Mac)
source venv/bin/activate

# 가상환경 활성화 (Windows)
venv\Scripts\activate
```

### 3. 의존성 설치
```bash
pip install -r requirements.txt
```

### 4. 애플리케이션 실행
```bash
python app.py
```

### 5. 웹 브라우저에서 접속
```
http://localhost:5000
```

## 데이터 관리

### 학생 데이터 관리 (students.json)
```json
{
  "id": 1,
  "name": "홍길동",
  "password": "1234",
  "team_id": 1,
  "has_voted": false,
  "voted_teams": null,
  "vote_timestamp": null
}
```

### 팀 데이터 관리 (teams.json)
```json
{
  "id": 1,
  "name": "A팀",
  "project_name": "AI 챗봇 개발",
  "members": [1, 2],
  "vote_count": 0
}
```

### 투표 설정 관리 (vote_config.json)
```json
{
  "is_active": false,
  "start_time": "09:00",
  "end_time": "17:00",
  "duration_minutes": 60,
  "vote_mode": "single"
}
```

### 교육과정별 데이터 변경 방법
1. `students.json` 파일에서 학생 정보 수정
2. `teams.json` 파일에서 팀 정보 수정
3. 서버 재시작 후 새로운 데이터로 운영

## 사용 방법

### 학생 사용법
1. 메인 페이지에서 "학생 모드" 선택
2. 이름과 개인 비밀번호로 로그인
3. 화면에 표시된 투표 방식 확인 (1개 또는 3개 팀 선택)
4. 자신의 팀을 제외한 팀 목록에서 투표할 팀 선택
   - **1개 팀 방식**: 1개 팀 클릭 후 투표
   - **3개 팀 방식**: 3개 팀을 순서대로 선택 (선택 순서 번호 표시)
5. 필요한 개수의 팀 선택 완료 후 "투표하기" 버튼 클릭
6. **투표 결과 확인**: 투표 직후 5초간 선택한 팀 정보 표시
7. **자동 전환**: 카운트다운 후 자동으로 "투표 완료" 상태로 변경

### 관리자 사용법
1. 메인 페이지에서 "관리자 모드" 선택
2. 관리자 비밀번호 입력으로 로그인
3. **투표 시작/설정** 버튼으로 투표 설정:
   - 투표 방식 선택 (1개 팀 또는 3개 팀)
   - 시작 방식 선택:
     - **즉시 시작**: 설정한 시간(분) 동안 투표 진행
     - **시간 설정**: 특정 시간대에 투표 진행
4. 실시간 투표 상태 모니터링 (활성화 상태, 진행 시간, 투표 방식)
5. 실시간 투표 현황 확인 (전체 학생, 투표 완료, 투표율)
6. "투표 결과" 탭에서 팀별 순위 확인 (공동 순위 자동 처리, 등수별 색상 표시)
7. "학생 현황" 탭에서 학생별 투표 상태 확인
8. **보안 투표 초기화**: 모달창에서 비밀번호 재입력으로 안전한 초기화
9. 투표 결과 CSV 다운로드 (투표 방식 정보 포함)
10. "새로고침" 버튼으로 최신 데이터 업데이트

## API 엔드포인트

### 학생용 API
- `POST /api/login` - 학생 로그인
- `GET /api/teams/<student_id>` - 투표 가능한 팀 목록
- `POST /api/vote` - 투표 실행

### 관리자용 API
- `POST /api/admin/login` - 관리자 로그인
- `GET /api/admin/vote-config` - 투표 설정 조회
- `POST /api/admin/start-vote` - 투표 시작 (즉시 시작 방식)
- `POST /api/admin/stop-vote` - 투표 종료
- `POST /api/admin/set-vote-time` - 투표 시간 설정
- `POST /api/admin/reset` - 투표 초기화
- `GET /api/admin/students` - 학생 현황 조회
- `GET /api/admin/teams` - 팀 현황 조회
- `GET /api/admin/votes` - 투표 결과 조회
- `GET /api/admin/download` - 결과 CSV 다운로드

## 보안 설정

### 관리자 비밀번호
- 현재 설정: `elixirrteacher`
- 변경 방법: `app.py` 파일의 관리자 인증 부분에서 수정

### 학생 비밀번호
- `students.json` 파일에서 개별적으로 설정
- 교육과정 시작 전 학생들에게 개별 전달

## 파일 구조
```
team_votes/
├── app.py                 # Flask 메인 애플리케이션
├── students.json          # 학생 정보 및 투표 상태
├── teams.json            # 팀 정보 및 투표 결과
├── votes.json            # 투표 기록 로그
├── vote_config.json      # 투표 설정 (시간, 방식 등)
├── requirements.txt      # Python 의존성
├── README.md            # 사용 설명서
├── static/              # 정적 파일 (이미지 등)
└── templates/
    └── index.html        # 메인 웹 페이지
```

## 특징

- **직관적 UI**: React 기반의 반응형 웹 인터페이스
- **유연한 투표 방식**: 1개 또는 3개 팀 선택 지원
- **스마트 시간 관리**: 즉시 시작 또는 시간 예약 설정
- **실시간 업데이트**: 투표 현황과 결과를 실시간으로 확인
- **공정한 투표**: 자신의 팀 제외, 중복 방지, 정확한 개수 선택
- **스마트 투표 결과 표시**: 5초간 투표 결과 확인 후 자동 전환
- **지능형 순위 시스템**: 공동 순위 자동 처리 및 올바른 순위 건너뛰기
- **시각적 순위 구분**: 금/은/동 메달 색상으로 등수 구분
- **보안 강화**: 관리자 기능에 이중 비밀번호 확인 시스템
- **사용자 친화적**: 실시간 가이드와 명확한 상태 안내
- **유지보수 용이**: JSON 파일 기반의 간단한 데이터 관리
- **교육과정 호환**: 손쉬운 학생/팀 데이터 변경

## 문제 해결

### 서버 실행 오류
- Python 버전 확인 (3.7+ 필요)
- 가상환경 활성화 상태 확인
- 의존성 재설치: `pip install -r requirements.txt`

### 데이터 로드 오류
- JSON 파일 문법 오류 확인
- 파일 인코딩 UTF-8 확인
- 파일 권한 확인

### 투표 오류
- 학생 정보와 팀 배정 정확성 확인
- 투표 활성화 상태 확인
- 투표 방식 설정 확인

### 투표 시간 설정 오류
- 시작 시간이 종료 시간보다 빠른지 확인
- 시간 형식 (HH:MM) 정확성 확인

## 순위 시스템 상세

### 공동 순위 처리 로직
```
예시: 5팀이 다음과 같은 득표를 했을 경우
- A팀: 15표 → 1등 (금색)
- B팀: 15표 → 1등 (금색) 
- C팀: 10표 → 3등 (동색)
- D팀: 8표  → 4등 (파란색)
- E팀: 8표  → 4등 (파란색)

결과: 1등 2팀, 2등 없음, 3등 1팀, 4등 2팀
```

### 색상 코드
- **🥇 1등 (Gold)**: `#EAB308` - 황금색
- **🥈 2등 (Silver)**: `#9CA3AF` - 은색  
- **🥉 3등 (Bronze)**: `#EA580C` - 동색
- **4등 이하**: `#3B82F6` - 파란색

## 버전 히스토리

### v2.1.0 (최신)
- 공동 순위 시스템 구현
- 등수별 색상 구분 (금/은/동)
- 순위 계산 로직 개선
- 도움말 및 문서 업데이트

### v2.0.0
- 다중 투표 방식 지원 (1개/3개 팀 선택)
- 통합 투표 시작/설정 모달
- 유연한 시간 관리 (즉시 시작/시간 설정)
- 향상된 사용자 경험
- API 확장 및 개선

### v1.0.0
- 기본 투표 시스템
- 학생/관리자 모드
- 투표 결과 관리
- CSV 다운로드

## 개발자 정보

이 시스템은 Flask와 React를 활용하여 개발되었으며, 온라인 교육 환경에서 프로젝트 평가를 위한 고급 투표 시스템으로 활용할 수 있습니다.

## 라이선스

MIT License - 교육 목적으로 자유롭게 사용 가능합니다.